import{_ as oe,a as se}from"./privacyModal.4fdbb5aa.js";import{u as ne,a as re}from"./entry.94a7074b.js";import{b as i,f as Y,o as de,J as r,L as a,M as o,U as ie,V as c,W as $,u as t,Q as u,X as w,F as y,R as h,$ as ue,N as K,m as Q,y as d,a as ce,Z as me}from"./swiper-vue.cbc5cb6b.js";import{u as _e}from"./vue.f36acd1f.482fc04a.js";import{a as H,g as pe}from"./axios.e739bd3a.js";import{_ as ve}from"./main-loader.b5e29ea6.js";const fe={class:"container textBooked",style:{"margin-top":"150px"}},ye=["data-app"],he={class:"container maintenance"},be={class:"row gap-4 justify-content-around"},ge={class:"col-12 col-xl-7 col-lg-7 col-md-6"},ke={class:"inp"},$e={for:""},we=["placeholder"],Me={key:0,class:"errorMessage text-danger fw-bold"},Ee={class:"inp"},Oe={for:""},Te={key:0,class:"errorMessage text-danger fw-bold"},xe={class:"inp"},Ce={for:""},Ve=["placeholder"],Ne={key:0,class:"errorMessage text-danger fw-bold"},Se={class:"inp"},Ue={for:""},De={key:0,class:"errorMessage text-danger fw-bold"},Ae={class:"inp"},Be={for:""},Le={value:null,disabled:""},Pe=["value"],qe={key:0,class:"errorMessage text-danger fw-bold"},Ie={class:"inp"},We={for:""},Fe={value:null,disabled:""},Re=["value"],Ye={key:0,class:"errorMessage text-danger fw-bold"},He={class:"inp"},ze={for:""},Je={value:null,disabled:""},Ke=["value"],Qe={key:0,class:"errorMessage text-danger fw-bold"},Xe={class:"inp"},Ze={for:""},Ge={class:"d-flex gap-3"},je={class:"d-flex flex-column w-50"},et={value:null,disabled:""},tt=["value"],at={key:0,class:"errorMessage text-danger fw-bold"},lt={class:"d-flex flex-column w-50"},ot={value:null,disabled:""},st=["value"],nt={key:0,class:"errorMessage text-danger fw-bold"},rt={class:"inp"},dt={for:""},it=["placeholder"],ut={key:0,class:"errorMessage text-danger fw-bold"},ct={class:"col-12 col-xl-4 col-lg-4 col-md-4 d-flex align-items-center gap-5 flex-column"},mt=a("div",{id:"inline_cal"},null,-1),_t={class:"time"},pt={class:"d-flex align-items-center justify-content-center"},vt={key:0,class:"spinner-border",style:{"border-color":"#1B395F","border-left-color":"transparent"},role:"status"},ft={key:1,class:"fw-bold mt-2"},yt={key:0,class:"timesec"},ht=["onClick"],bt={key:0,class:"errorMessage text-danger fw-bold"},gt={class:"check d-flex align-items-center gap-3"},kt={for:"checkTerms"},$t={type:"button","data-bs-toggle":"modal","data-bs-target":"#termsModal"},wt={type:"button","data-bs-toggle":"modal","data-bs-target":"#privacyModal"},Mt={key:1,class:"errorMessage text-danger fw-bold"},Et=["disabled"],Ot={key:0,class:"spinner-border text-light",role:"status"},Tt={key:0,class:"mainLoader"},xt=a("video",{autoplay:"",loop:"",muted:"",playsinline:"",src:ve,alt:""},null,-1),Ct=[xt],qt={__name:"maintenance",setup(Vt){const{locale:X}=ne();let p=i(null),M=i(1),T=i(!0),x=i(!0),v=i(X);const Z=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];let z=i([]);const G=re(),E=pe();let O=i([]),C=i([]),V=i([]),f=i([]),b=i(!1),N=i(!1),J=i([]),s=i({name:null,phone:null,branch_id:null,brand_id:null,city_id:null,car_id:null,model_id:null,model_year:2023,date:null,description:null,email:null,time:null,terms_and_privacy:null});(async()=>{x.value=!0;let e=await H.get(`${E}/make-appointment-form-data`,{headers:{"Content-Language":`${v.value}`}});e.status==200&&(x.value=!1),console.log(e.data),O.value=e.data.brands,C.value=e.data.cities,V.value=e.data.days_of,(()=>{for(let m=0;m<V.value.length;m++)z.value.push(Z.indexOf(V.value[m]))})();function k(m){return!z.value.includes(m.getDay())}{setTimeout(()=>{rome(inline_cal,{time:!1,min:e.data.start_date,max:e.data.end_date,dateValidator:k}),document.querySelector(".rd-day-body.rd-day-selected").click()},500);let m=null;document.querySelectorAll(".rd-day-body"),document.querySelector(".rd-next"),document.querySelector(".rd-back"),document.addEventListener("click",function(l){l.target.classList.contains("rd-day-body")&&setTimeout(async()=>{if(p.value=rome(inline_cal).getDateString(),m!=p.value){T.value=!0,N.value=!1,b.value=!1,console.log(p.value),m=p.value;let _=await H.get(`${E}/time-slots?date=${p.value}`,{headers:{"Content-Language":`${v.value}`}});_.status==200&&(T.value=!1,N.value=!0,f.value=_.data,console.log(f.value),s.value.date=p.value,b.value=!1,f.value.length<1?b.value=!0:(f.value[0].value.available&&(s.value.time=f.value[0].value),b.value=!1))}},100)})}})();const j=async()=>{let e=await H.get(`${E}/cars`,{params:{brands:[s.value.brand_id],models:[s.value.model_id]},headers:{"Content-Language":`${v.value}`}});J.value=e.data.data,console.log(e.data.data)},ee=Y(()=>O.value.filter(e=>e.id==s.value.brand_id));Y(()=>O.value.filter(e=>e.id==s.value.brand_id));const te=Y(()=>C.value.filter(e=>e.id==s.value.city_id));let S=i(null),U=i(null),D=i(null),A=i(null),B=i(null),L=i(null),ae=i(null),P=i(null),q=i(null),I=i(null),W=i(null),F=i(null),R=i(null),g=i(!1);const le=async()=>{g.value=!0,fetch(`${E}/make-appointment`,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json","Content-Language":`${v.value}`},body:JSON.stringify(s.value)}).then(e=>e.json()).then(e=>{if(g.value=!1,console.log(e),e.message)S.value=e.errors.phone==null?null:e.errors.phone[0],U.value=e.errors.name==null?null:e.errors.name[0],q.value=e.errors.email==null?null:e.errors.email[0],D.value=e.errors.branch_id==null?null:e.errors.branch_id[0],A.value=e.errors.brand_id==null?null:e.errors.brand_id[0],B.value=e.errors.city_id==null?null:e.errors.city_id[0],L.value=e.errors.model_id==null?null:e.errors.model_id[0],ae.value=e.errors.date==null?null:e.errors.date[0],P.value=e.errors.description==null?null:e.errors.description[0],I.value=e.errors.time==null?null:e.errors.time[0],W.value=e.errors.terms_and_privacy==null?null:e.errors.terms_and_privacy[0],F.value=e.errors.model_year==null?null:e.errors.model_year[0],R.value=e.errors.car_id==null?null:e.errors.car_id[0],console.log(e);else{console.log(e);const n={id:e.id,date:e.date,time:e.time,branch:e.branch,city:e.city},k=v.value+"/booked";G.push({path:`/${k}`,query:n}),g.value=!1}})};return _e({title:v.value=="ar"?"احجز موعد صيانتك / الكثيري للسيارات":"alkathiri motors / BOOK YOUR MAINTENANCE APPOINTMENT"}),de(async()=>{}),(e,n)=>{const k=oe,m=se;return d(),r("div",null,[a("div",fe,[a("h3",{"data-app":e.$t("HAPPY TO HELP YOU")},o(e.$t("BOOK YOUR MAINTENANCE APPOINTMENT")),9,ye),a("p",null,o(e.$t("bookText")),1)]),a("div",he,[a("div",be,[a("div",ge,[a("form",{action:"",onSubmit:n[11]||(n[11]=ie(()=>{},["prevent"]))},[a("div",ke,[a("label",$e,o(e.$t("full name")),1),c(a("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=l=>t(s).name=l),placeholder:e.$t("write your name..")},null,8,we),[[$,t(s).name]]),t(U)?(d(),r("span",Me,o(t(U)),1)):u("",!0)]),a("div",Ee,[a("label",Oe,o(e.$t("email")),1),c(a("input",{type:"email","onUpdate:modelValue":n[1]||(n[1]=l=>t(s).email=l),placeholder:"example@mail.com.."},null,512),[[$,t(s).email]]),t(q)?(d(),r("span",Te,o(t(q)),1)):u("",!0)]),a("div",xe,[a("label",Ce,o(e.$t("phone number")),1),c(a("input",{type:"tel","onUpdate:modelValue":n[2]||(n[2]=l=>t(s).phone=l),placeholder:e.$t("phone number")},null,8,Ve),[[$,t(s).phone]]),t(S)?(d(),r("span",Ne,o(t(S)),1)):u("",!0)]),a("div",Se,[a("label",Ue,o(e.$t("What is your car’s model year?")),1),c(a("input",{type:"number","onUpdate:modelValue":n[3]||(n[3]=l=>t(s).model_year=l),min:"1900",max:"2100",step:"1"},null,512),[[$,t(s).model_year]]),t(F)?(d(),r("span",De,o(t(F)),1)):u("",!0)]),a("div",Ae,[a("label",Be,o(e.$t("What is your car’s Brand?")),1),c(a("select",{name:"",id:"","onUpdate:modelValue":n[4]||(n[4]=l=>t(s).brand_id=l)},[a("option",Le,o(e.$t("Select Brand...")),1),(d(!0),r(y,null,h(t(O),l=>(d(),r("option",{value:l.id},o(l.name),9,Pe))),256))],512),[[w,t(s).brand_id]]),t(A)?(d(),r("span",qe,o(t(A)),1)):u("",!0)]),a("div",Ie,[a("label",We,o(e.$t("Which car model are you booking for?")),1),c(a("select",{onChange:n[5]||(n[5]=l=>j()),name:"",id:"","onUpdate:modelValue":n[6]||(n[6]=l=>t(s).model_id=l)},[a("option",Fe,o(e.$t("Select Model...")),1),t(s).brand_id?(d(!0),r(y,{key:0},h(t(ee)[0].models,(l,_)=>(d(),r("option",{value:l.id},o(l.name),9,Re))),256)):u("",!0)],544),[[w,t(s).model_id]]),t(L)?(d(),r("span",Ye,o(t(L)),1)):u("",!0)]),a("div",He,[a("label",ze,o(e.$t("selected car")),1),c(a("select",{name:"",id:"","onUpdate:modelValue":n[7]||(n[7]=l=>t(s).car_id=l)},[a("option",Je,o(e.$t("Select Model...")),1),t(s).model_id?(d(!0),r(y,{key:0},h(t(J),(l,_)=>(d(),r("option",{value:l.id},o(l.name),9,Ke))),256)):u("",!0)],512),[[w,t(s).car_id]]),t(R)?(d(),r("span",Qe,o(t(R)),1)):u("",!0)]),a("div",Xe,[a("label",Ze,o(e.$t("Choose a city and branch for your service")),1),a("div",Ge,[a("div",je,[c(a("select",{name:"",id:"",class:"w-100","onUpdate:modelValue":n[8]||(n[8]=l=>t(s).city_id=l)},[a("option",et,o(e.$t("Select city...")),1),(d(!0),r(y,null,h(t(C),l=>(d(),r("option",{value:l.id},o(l.name),9,tt))),256))],512),[[w,t(s).city_id]]),t(B)?(d(),r("span",at,o(t(B)),1)):u("",!0)]),a("div",lt,[c(a("select",{name:"",id:"",class:"w-100","onUpdate:modelValue":n[9]||(n[9]=l=>t(s).branch_id=l)},[a("option",ot,o(e.$t("Select branch...")),1),t(s).city_id?(d(!0),r(y,{key:0},h(t(te)[0].branches,l=>(d(),r("option",{value:l.id},o(l.name),9,st))),256)):u("",!0)],512),[[w,t(s).branch_id]]),t(D)?(d(),r("span",nt,o(t(D)),1)):u("",!0)])])]),a("div",rt,[a("label",dt,o(e.$t("Please add any extra information about your appointment request")),1),c(a("textarea",{style:{resize:"none"},"onUpdate:modelValue":n[10]||(n[10]=l=>t(s).description=l),rows:"",cols:"",placeholder:e.$t("write your message here")},null,8,it),[[$,t(s).description]]),t(P)?(d(),r("span",ut,o(t(P)),1)):u("",!0)])],32)]),a("div",ct,[mt,a("div",_t,[a("h3",null,o(e.$t("time")),1),a("div",pt,[t(T)?(d(),r("div",vt)):u("",!0),t(b)?(d(),r("span",ft,o(e.$t("no time")),1)):u("",!0)]),t(N)?(d(),r("div",yt,[(d(!0),r(y,null,h(t(f),(l,_)=>(d(),r("span",{onClick:St=>(ce(M)?M.value=_+1:M=_+1,l.available?t(s).time=l.value:null),class:me({disabled:l.available==!1,choose:t(M)==_+1})},o(l.time),11,ht))),256))])):u("",!0)]),t(I)?(d(),r("span",bt,o(t(I)),1)):u("",!0),a("div",gt,[c(a("input",{id:"checkTerms",type:"checkbox",value:"1","onUpdate:modelValue":n[12]||(n[12]=l=>t(s).terms_and_privacy=l)},null,512),[[ue,t(s).terms_and_privacy]]),a("label",kt,[K(o(e.$t("I have read and unconditionally agree to the"))+" ",1),a("span",$t,o(e.$t("Term And Conditions")),1),K(" "+o(e.$t("and"))+" ",1),a("span",wt,o(e.$t("Privacy Policy")),1)])]),t(W)?(d(),r("span",Mt,o(t(W)),1)):u("",!0),a("button",{disabled:t(g),onClick:n[13]||(n[13]=l=>le()),class:"w-100 d-flex align-items-center justify-content-center gap-4"},[a("span",null,o(e.$t("submit")),1),t(g)?(d(),r("div",Ot)):u("",!0)],8,Et)])])]),t(x)?(d(),r("div",Tt,Ct)):u("",!0),Q(k),Q(m)])}}};export{qt as default};
