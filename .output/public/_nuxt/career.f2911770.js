import{_ as Q}from"./nuxt-link.44fb5eba.js";import{u as W,a as X,b as Z}from"./entry.94a7074b.js";import{b as o,f as G,J as n,L as e,M as a,u as s,N as R,F as E,R as L,Q as d,y as r,Z as K,a as v,U as Y,m as S,A as T,V as C,W as U,X as j}from"./swiper-vue.cbc5cb6b.js";import{u as ee}from"./vue.f36acd1f.482fc04a.js";import{u as le}from"./composables.4c8a3063.js";import{a as O,g as te}from"./axios.e739bd3a.js";import{_ as se}from"./main-loader.b5e29ea6.js";const ae={style:{"min-height":"100vh"}},oe={class:"container career",style:{"margin-top":"150px"}},ne={class:"row gap-2 justify-content-center",style:{"min-height":"100vh"}},re={class:"col-12 col-xl-4 col-lg-4 col-md-4 mt-5"},ie={class:"d-flex flex-column gap-3 mb-3",style:{position:"sticky",top:"120px"}},ue=["data-find"],de={class:"numjobs my-1"},ce={class:"jobs d-flex flex-column gap-3"},pe=["onClick"],me={class:"det"},_e=e("i",{class:"fa-solid fa-chevron-right"},null,-1),ve={class:"col-12 col-xl-7 col-lg-7 col-md-7 my-5"},he={key:0},fe=e("i",{class:"fa-solid fa-chevron-left"},null,-1),ge={class:"inp"},ye={for:""},be=["placeholder"],xe={key:0,class:"errorMessage text-danger fw-bold"},$e={class:"inp"},ke={for:""},we={key:0,class:"errorMessage text-danger fw-bold"},Ce={class:"inp"},Me={for:""},Ve={key:0,class:"errorMessage text-danger fw-bold"},Ee={class:"inp"},Le={for:""},Ue={value:null,disabled:""},Fe=["value"],Ne={key:0,class:"errorMessage text-danger fw-bold"},De={class:"inp"},Je={for:""},Re={key:0,class:"errorMessage text-danger fw-bold"},Se={class:"inp"},Te={for:""},Oe=["placeholder"],Be=["disabled"],Pe={key:0,class:"spinner-border text-light",role:"status"},qe={key:0,class:"mainLoader"},ze=e("video",{autoplay:"",loop:"",muted:"",playsinline:"",src:se,alt:""},null,-1),Ae=[ze],el={__name:"career",setup(Ie){const{locale:B}=W(),P=X(),q=le(),F=Z();let M=te(),_=o(B),V=o(!1),N=o([]),z=o(null);const A=F.query.id?F.query.id:null;let c=o(A),p=o([]);(async()=>{V.value=!0;const t=await O.get(`${M}/careers`,{headers:{"Content-Language":`${_.value}`}}),l=await O.get(`${M}/cities`,{headers:{"Content-Language":`${_.value}`}});t.status==200&&l.status==200&&(V.value=!1,p.value=t.data.data,N.value=l.data.data),console.log(p.value)})(),G(()=>p.value.filter(t=>t.title==z.value));const D=o(null),h=o(null),f=o(null),g=o("");let m=o(null);o("");let y=o(null),b=o(null),x=o(null),$=o(null),k=o(null),w=o(!1);const I=t=>{var l=t.target.files||t.dataTransfer.files;l.length&&(D.value=l[0])},H=async()=>{let t=new FormData;t.append("name",g.value),t.append("email",f.value),t.append("phone",h.value),t.append("cv",D.value),console.log(m.value),t.append("city_id",m.value),console.log(`id:${c.value}`),w.value=!0,await fetch(`${M}/careers/${c.value}/apply`,{method:"POST",headers:{"Content-Language":`${_.value}`},body:t}).then(l=>l.json()).then(l=>{console.log(l),w.value=!1,l.message?(y.value=l.errors.email==null?null:l.errors.email[0],x.value=l.errors.name==null?null:l.errors.name[0],b.value=l.errors.phone==null?null:l.errors.phone[0],$.value=l.errors.cv==null?null:l.errors.cv[0],k.value=l.errors.city_id==null?null:l.errors.city_id[0]):(y.value=null,x.value=null,b.value=null,$.value=null,k.value=null,P.push(`/${_.value}/submited`))})};return ee({title:_.value=="ar"?" وظائف/الكثيري للسيارات":"alkathiri motors / careers"}),(t,l)=>{const J=Q;return r(),n("div",ae,[e("div",oe,[e("div",ne,[e("div",re,[e("div",ie,[e("h3",{"data-find":t.$t("JOIN OUR TEAM"),class:""},a(t.$t("find your career")),9,ue),e("p",de,[e("span",null,a(s(p).length),1),R(a(t.$t("open Opportunities")),1)]),e("div",ce,[(r(!0),n(E,null,L(s(p),(u,i)=>(r(),n("div",{style:{cursor:"pointer"},class:K(["job d-flex align-items-center justify-content-between",{active:s(c)==u.id}]),onClick:Qe=>v(c)?c.value=u.id:c=u.id},[e("div",me,[e("h6",null,a(u.title),1),e("span",null,a(u.address)+" | "+a(u.created_at),1)]),_e],10,pe))),256))])])]),e("div",ve,[(r(!0),n(E,null,L(s(p),u=>(r(),n("div",null,[s(c)==u.id?(r(),n("div",he,[e("form",{action:"",onSubmit:l[5]||(l[5]=Y(()=>{},["prevent"]))},[S(J,{to:s(q)("/careers")},{default:T(()=>[e("h5",null,[fe,R(" "+a(u.title),1)])]),_:2},1032,["to"]),e("div",ge,[e("label",ye,a(t.$t("full name")),1),C(e("input",{"onUpdate:modelValue":l[0]||(l[0]=i=>v(g)?g.value=i:null),type:"text",placeholder:t.$t("write your name..")},null,8,be),[[U,s(g)]]),s(x)?(r(),n("span",xe,a(s(x)),1)):d("",!0)]),e("div",$e,[e("label",ke,a(t.$t("email")),1),C(e("input",{"onUpdate:modelValue":l[1]||(l[1]=i=>v(f)?f.value=i:null),type:"email",placeholder:"example@mail.com..."},null,512),[[U,s(f)]]),s(y)?(r(),n("span",we,a(s(y)),1)):d("",!0)]),e("div",Ce,[e("label",Me,a(t.$t("phone number")),1),C(e("input",{"onUpdate:modelValue":l[2]||(l[2]=i=>v(h)?h.value=i:null),type:"text",placeholder:"05xxxxxxxx..."},null,512),[[U,s(h)]]),s(b)?(r(),n("span",Ve,a(s(b)),1)):d("",!0)]),e("div",Ee,[e("label",Le,a(t.$t("choose city")),1),C(e("select",{name:"",id:"","onUpdate:modelValue":l[3]||(l[3]=i=>v(m)?m.value=i:m=i)},[e("option",Ue,a(t.$t("Select city...")),1),(r(!0),n(E,null,L(s(N),i=>(r(),n("option",{value:i.id},a(i.name),9,Fe))),256))],512),[[j,s(m)]]),s(k)?(r(),n("span",Ne,a(s(k)),1)):d("",!0)]),e("div",De,[e("label",Je,a(t.$t("resume")),1),e("input",{onChange:I,type:"file",name:""},null,32),s($)?(r(),n("span",Re,a(s($)),1)):d("",!0)]),e("div",Se,[e("label",Te,a(t.$t("Do you have any comments ?")),1),e("textarea",{style:{resize:"none"},placeholder:t.$t("write your message here"),name:"",cols:"10",rows:"5"},null,8,Oe)]),e("div",null,[S(J,null,{default:T(()=>[e("button",{class:"d-flex align-items-center gap-3",disabled:s(w),onClick:l[4]||(l[4]=i=>H())},[e("span",null,a(t.$t("send application")),1),s(w)?(r(),n("div",Pe)):d("",!0)],8,Be)]),_:1})])],32)])):d("",!0)]))),256))])])]),s(V)?(r(),n("div",qe,Ae)):d("",!0)])}}};export{el as default};
