import{Y as T,Z as V,a as i,m as j,_ as z,$ as M,a0 as E,L as u,M as e,x as G,B as P,O as k,F as A,R as I,P as N,z as r,A as R,U as F,N as c}from"./swiper-vue.bc72199a.js";import{u as U}from"./composables.7e979bb1.js";import{d as D,u as H,c as Y,a as Z}from"./entry.ab33c377.js";import{a as L,g as K}from"./axios.78c6ffe3.js";import{t as b}from"./style.3a1cf634.js";const Q={components:{Swiper:T,SwiperSlide:V},async setup(){U();const{locale:v}=H();let l=i(v),p=K(),a=Y(),y=i([]),f=i([]),_=i(1),g=i(!1),t=i([_.value]);const h=s=>{t.value[0]=s};let m=i(!0);(async()=>{m.value=!0;let s=await L.get(`${p}/brands`,{headers:{"Content-Language":`${l.value}`}});s.status==200&&(m.value=!1),y.value=s.data.data})();const C=async()=>{g.value=!0,f.value=[];let s=await L.get(`${p}/cars`,{params:{brands:t.value},headers:{"Content-Language":`${l.value}`}});if(s.status==200){g.value=!1;{let n=JSON.parse(sessionStorage.getItem("thefav"))?JSON.parse(sessionStorage.getItem("thefav")):[];if(console.log(n),n.length>=1)for(let o=0;o<s.data.data.length;o++)s.data.data[o].id==n[o].id&&(s.data.data[o].is_in_favorite=n[o].is_in_favorite)}f.value=s.data.data}},O=()=>{const s={id:_.value},n=l.value+"/brandcar";a.push({path:`/${n}`,query:s})},J=(s,n)=>{const o={id:s,name:n},d=l.value+"/car";a.push({path:`/${d}`,query:o})};let S=i("added to wishlist"),w=i("success"),B=i("removed from wishlist");l.value=="ar"&&(S.value="تم الاضافة الي قائمة المفضلات",w.value="نجاح",B.value="تم الحذف من قائمة المفضلات");let x=i([]);i([]);const $=s=>{{let n=JSON.parse(sessionStorage.getItem("thefav"))?JSON.parse(sessionStorage.getItem("thefav")):[],o=n.filter(d=>d.id==s.id);if(console.log(o),s.is_in_favorite=!s.is_in_favorite,o.length<=1)if(n.push(s),s.is_in_favorite==!0)sessionStorage.setItem("thefav",JSON.stringify(n)),b({title:S.value,description:w.value},{timeout:5e3,toastBackgroundColor:"green",showIcon:"true",type:"success",transition:"bounce"});else{let d=n.filter(q=>q.id!=s.id);b({title:B.value,description:w.value},{timeout:5e3,toastBackgroundColor:"green",showIcon:"true",type:"success",transition:"bounce"}),x.value=[],sessionStorage.setItem("thefav",JSON.stringify(d)),d.length<1&&sessionStorage.removeItem("thefav")}}};return Z({title:l.value=="ar"?"السيارات/الكثيري للسيارات":"alkathiri motors / cars"}),j(()=>{C()}),{modules:[z,M,E],goToBrandPageById:O,pending:m,brandArray:y,latestArray:f,checkMain:t,changeActive:_,carLatestFunc:C,changeActiveFunc:h,spinner:g,goToCarPage:J,addToFav:$}}},W={class:"brands-container",style:{}},X=["onClick"],ee=["src"],te={key:0,class:"mainLoader"},se=e("span",{class:"loader"},null,-1),ae=[se],ne={class:"container cars-related-with-brands",style:{"min-height":"100vh"}},ie={class:"row justify-content-center"},oe={key:0,class:"d-flex align-items-center justify-content-center"},le=e("div",{class:"spinner-border text-center",style:{width:"5rem",height:"5rem"},role:"status"},null,-1),re=[le],ce={class:"col-3 mainlatestbox",style:{cursor:"pointer"}},de={class:"image"},ue=["onClick","src","alt"],ve={class:"text1"},_e={class:"price"},ge={class:"after"},he={class:"detail"},fe=e("i",{class:"fa-solid fa-chevron-right"},null,-1),me=["onClick"],pe=["onClick"],ye={class:"d-flex align-items-center justify-content-center mt-5"},we=e("i",{class:"fa-solid fa-chevron-right"},null,-1);function ke(v,l,p,a,y,f){const _=V,g=T;return r(),u("div",null,[e("div",W,[G(g,{slidesPerView:3,spaceBetween:10,loop:!0,breakpoints:{500:{slidesPerView:3,spaceBetween:10},768:{slidesPerView:5,spaceBetween:20},1024:{slidesPerView:8,spaceBetween:20}},modules:a.modules,class:"mySwiper"},{default:P(()=>[(r(!0),u(A,null,I(a.brandArray,(t,h)=>(r(),R(_,{class:""},{default:P(()=>[e("div",{class:F(["box",{active:a.changeActive==t.id}]),onClick:m=>(a.changeActive=t.id,a.changeActiveFunc(t.id),a.carLatestFunc())},[e("img",{src:t.image,alt:""},null,8,ee),e("span",null,c(t.name),1)],10,X)]),_:2},1024))),256))]),_:1},8,["modules"])]),a.pending?(r(),u("div",te,ae)):k("",!0),e("div",ne,[e("div",ie,[a.spinner?(r(),u("div",oe,re)):k("",!0),a.latestArray?(r(!0),u(A,{key:1},I(a.latestArray,t=>(r(),u("div",ce,[e("div",de,[e("img",{onClick:h=>a.goToCarPage(t.id,t.name),src:t.main_image,loading:"lazy",alt:t.name},null,8,ue)]),e("h3",null,c(t.name),1),e("div",ve,[e("div",_e,[e("span",null,c(v.$t("price")),1),e("h4",null,c(t.selling_price),1)]),e("div",ge,[e("span",null,c(v.$t("after vat")),1),e("h4",null,c(t.selling_price_after_vat==null?0:t.selling_price_after_vat),1)])]),e("span",he,[N(c(v.$t("details"))+" ",1),fe]),e("div",{class:"overlay",onClick:h=>a.goToCarPage(t.id,t.name)},null,8,me),e("i",{onClick:h=>a.addToFav(t),class:F(["fa-regular fa-heart fav",{"fa-solid":t.is_in_favorite}])},null,10,pe)]))),256)):k("",!0)]),e("div",ye,[e("button",{onClick:l[0]||(l[0]=t=>a.goToBrandPageById()),class:"d-flex align-items-center gap-2 px-5"},[N(" Explore more "),we])])])])}const Ne=D(Q,[["render",ke]]);export{Ne as default};
