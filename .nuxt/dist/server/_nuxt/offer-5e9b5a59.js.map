{"version":3,"file":"offer-5e9b5a59.js","sources":["../../../../pages/offer.vue"],"sourcesContent":["<template>\r\n    <div>\r\n  <div v-if=\"!pending\" class=\"theOffer\" style=\"margin-top: 150px;\">\r\n    <div class=\"container \">\r\n    <div class=\"containe px-3\">\r\n     <img :src=\"theOffer.image\"  class=\"w-100\" :alt=\"theOffer.title\">\r\n        <h3 class=\"my-3 fw-bolder thehead\">{{ theOffer.title }}</h3>\r\n        <ClientOnly>\r\n           <p v-html=\"theOffer.description\"></p>\r\n        </ClientOnly>\r\n     \r\n    </div>\r\n            <div class=\"includedOffers  \">\r\n                <h3 class=\"fw-bolder pt-3 thehead\">{{ $t('Vehicles Included In The Offer') }}</h3>\r\n               <div class=\"row  justify-content-center gap-1   \">\r\n             <div v-for=\"offer in offersCar\" @click=\"goToCarPage(offer.id , offer.name)\" style=\"cursor: pointer;\"  class=\"mainlatestbox col-xl-2 col-lg-2 col-md-4\">\r\n               <div class=\"image\">\r\n                    <img :src=\"offer.main_image\" :alt=\"offer.name\">\r\n                </div>\r\n                <h3>{{ offer.name }}</h3>\r\n                <div class=\"text1\">\r\n                    <div class=\"price\">\r\n                        <span>{{ $t('price') }}</span>\r\n                        <h4>{{ offer.selling_price }} SAR</h4>\r\n                    </div>\r\n                    <div class=\"after\">\r\n                        <span>{{ $t('after vat') }}</span>\r\n                        <h4>{{ offer.selling_price_after_vat }} SAR</h4>\r\n                    </div>\r\n                </div>\r\n                 <span class=\"detail\">\r\n                     {{ $t('details') }}\r\n                    <i class=\"fa-solid fa-chevron-right\"></i> \r\n                 </span>\r\n                 <div @click=\"goToCarPage(offer.id , offer.name)\" class=\"overlay\"></div>\r\n               \r\n          <i @click=\"addToFav(offer)\" class=\"fa-regular fa-heart fav\"  :class=\"{'fa-solid':offer.is_in_favorite}\"  ></i>\r\n             </div>\r\n            \r\n               </div>  \r\n           </div>\r\n    </div>\r\n</div>\r\n  <div v-if=\"pending\"  class=\"mainLoader\">\r\n     <span class=\"loader\"></span>\r\n    </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n\r\nimport { createToast } from 'mosha-vue-toastify';\r\nimport 'mosha-vue-toastify/dist/style.css'\r\nimport axios from 'axios';\r\n    const {locale } = useI18n();\r\nlet lang = ref(locale);\r\nconst MainRoute = useRoute();\r\nconst router = useRouter();\r\nlet id = MainRoute.query.id;\r\nlet url = getUrl();\r\nlet pending = ref(false);\r\nlet theOffer = ref([]);\r\nlet offersCar = ref([]);\r\n\r\n   let addedList = ref('added to wishlist');\r\n    let success = ref('success');\r\n    let removedList = ref('removed from wishlist')\r\n    if (lang.value == 'ar') {\r\n      addedList.value = 'تم الاضافة الي قائمة المفضلات'\r\n      success.value = 'نجاح';\r\n      removedList.value = 'تم الحذف من قائمة المفضلات'\r\n    } else if (lang.value == 'en') {\r\n       addedList.value = 'added to wishlist'\r\n      success.value = 'success';\r\n      removedList.value = 'removed from wishlist';\r\n    }\r\n\r\n    const addToFav = (box) => {\r\n      if (process.client) {\r\n   let favGet = JSON.parse(sessionStorage.getItem('thefav'))? JSON.parse(sessionStorage.getItem('thefav')) : [];\r\n      // let favChoose = favGet.find((boxi) => boxi.name == box.name);\r\n        let favChoose =  favGet.filter((ele) => {\r\n          return ele.id == box.id;\r\n      });\r\n      console.log(favChoose);\r\n      // console.log(favGet);\r\n        \r\n          box.is_in_favorite = !box.is_in_favorite;\r\n      if (favChoose.length <= 1) {\r\n        //fav.value.push(box)\r\n        favGet.push(box);\r\n        if (box.is_in_favorite == true) {\r\n                       createToast({\r\n            title: addedList.value,\r\n            description: success.value,\r\n            },\r\n            {\r\n            timeout: 5000,\r\n            toastBackgroundColor: 'green',\r\n            showIcon: 'true',\r\n            type: 'success',\r\n            transition: 'bounce',\r\n            })\r\n         sessionStorage.setItem('thefav', JSON.stringify(favGet));\r\n        } else {\r\n           let final =   favGet.filter((ele) => {\r\n                    return ele.id != box.id;\r\n           });\r\n\r\n            createToast({\r\n            title: removedList.value,\r\n            description: success.value,\r\n            },\r\n            {\r\n              timeout: 5000,\r\n            toastBackgroundColor: 'green',\r\n            showIcon: 'true',\r\n            type: 'success',\r\n            transition: 'bounce',\r\n            })   \r\n                  //fav.value = [];\r\n                   \r\n                 sessionStorage.setItem('thefav', JSON.stringify(final));\r\n                    if (final.length < 1) {\r\n                      // window.location.reload();\r\n                      sessionStorage.removeItem(\"thefav\");\r\n                      // fav.value = [];\r\n\r\n                    }\r\n      }       \r\n               \r\n        } \r\n       \r\n           \r\n        \r\n      }\r\n  \r\n\r\n      \r\n    }\r\nconst offerFanc = async () => {\r\n  pending.value = true;\r\n  let box = await axios.get(`${url}/offers/${id}`,{\r\n      headers: {\r\n    'Content-Language':`${lang.value}`\r\n  }\r\n  });\r\n  if (box.status == 200) {\r\n    pending.value = false;\r\n  }\r\n  \r\n  theOffer.value = box.data.offer;\r\n\r\n     if (process.client) {\r\n   let favGet = JSON.parse(sessionStorage.getItem('thefav'))? JSON.parse(sessionStorage.getItem('thefav')) : [];\r\n      console.log(favGet);\r\n          if (favGet.length <= 1) {\r\n        //  latest.data.data = favGet;\r\n            box.data.offer_cars.map((ele) => {\r\n             return ele.id == favGet.map((e) => {\r\n               return e.id;\r\n             }) ? ele.is_in_favorite = true : false;\r\n           }); \r\n        \r\n       } else {\r\n           for (let i = 0; i < box.data.offer_cars.length; i++){\r\n            if (box.offer_cars.data[i].id == favGet[i].id) {\r\n              box.data.offer_cars[i].is_in_favorite = favGet[i].is_in_favorite;\r\n           }\r\n         }\r\n       }\r\n      }\r\n  offersCar.value = box.data.offer_cars\r\n\r\n  useHead({\r\n  title: lang.value == 'ar' ? `${theOffer.value.title}/الكثيري للسيارات` : `alkathiri motors / ${theOffer.value.title}`\r\n});\r\n}\r\nofferFanc();\r\n\r\n  const goToCarPage = (id , name) => {\r\n      const queryParams = {\r\n        id: id,\r\n        name: name,\r\n      }\r\n         const url = lang.value + '/car'\r\n\r\n      router.push({ path: `/${url}` , query: queryParams })\r\n}\r\n\r\n\r\n  \r\n\r\n\r\n\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\r\n\r\n</style>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDI,UAAM,EAAC,OAAM,IAAK;AACtB,QAAI,OAAO,IAAI,MAAM;AACrB,UAAM,YAAY,SAAQ;AACX,cAAY;AAC3B,QAAI,KAAK,UAAU,MAAM;AACzB,QAAI,MAAM,OAAM;AAChB,QAAI,UAAU,IAAI,KAAK;AACvB,QAAI,WAAW,IAAI,CAAA,CAAE;AACrB,QAAI,YAAY,IAAI,CAAA,CAAE;AAEnB,QAAI,YAAY,IAAI,mBAAmB;AACtC,QAAI,UAAU,IAAI,SAAS;AAC3B,QAAI,cAAc,IAAI,uBAAuB;AAC7C,QAAI,KAAK,SAAS,MAAM;AACtB,gBAAU,QAAQ;AAClB,cAAQ,QAAQ;AAChB,kBAAY,QAAQ;AAAA,IAC1B,WAAe,KAAK,SAAS,MAAM;AAC5B,gBAAU,QAAQ;AACnB,cAAQ,QAAQ;AAChB,kBAAY,QAAQ;AAAA,IACrB;AAiEL,UAAM,YAAY,YAAY;AAC5B,cAAQ,QAAQ;AAChB,UAAI,MAAM,MAAM,MAAM,IAAI,GAAG,cAAc,MAAK;AAAA,QAC5C,SAAS;AAAA,UACX,oBAAmB,GAAG,KAAK;AAAA,QAC5B;AAAA,MACH,CAAG;AACD,UAAI,IAAI,UAAU,KAAK;AACrB,gBAAQ,QAAQ;AAAA,MACjB;AAED,eAAS,QAAQ,IAAI,KAAK;AAqB1B,gBAAU,QAAQ,IAAI,KAAK;AAE3B,cAAQ;AAAA,QACR,OAAO,KAAK,SAAS,OAAO,GAAG,SAAS,MAAM,2BAA2B,sBAAsB,SAAS,MAAM;AAAA,MAChH,CAAC;AAAA,IACD;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}