{"version":3,"file":"maintenance-41f14cf1.js","sources":["../../../../pages/maintenance.vue"],"sourcesContent":["<template>\r\n    <div>\r\n         <div class=\"container textBooked\" style=\"margin-top: 150px;\">\r\n          <h3 :data-app=\"$t('HAPPY TO HELP YOU')\">{{ $t('BOOK YOUR MAINTENANCE APPOINTMENT') }}</h3>\r\n          <p>\r\n          Lorem ipsum dolor sit amet\r\n           consectetur adipisicing elit. Quos laboriosam asperiores,\r\n            iusto modi sapiente ut beatae qui! Quos aspernatur accusantium vel, \r\n          perferendis enim ipsam praesentium corporis ab quam eius. Quaerat.\r\n          Lorem ipsum dolor sit amet\r\n           consectetur adipisicing elit. Quos laboriosam asperiores,\r\n            iusto modi sapiente ut beatae qui! Quos aspernatur accusantium vel, \r\n          perferendis enim ipsam praesentium corporis ab quam eius. Quaerat.\r\n          </p>\r\n         </div>\r\n         <div class=\"container maintenance\">\r\n          <div class=\"row gap-4 justify-content-around\">\r\n           <div class=\"col-12 col-xl-7 col-lg-7 col-md-6\">\r\n            <form action=\"\" @submit.prevent>\r\n              <div class=\"inp\">\r\n               <label for=\"\"> {{ $t('full name') }}</label>\r\n               <input type=\"text\" v-model=\"mainObj.name\" :placeholder=\"$t('write your name..')\">\r\n          <span class=\"errorMessage text-danger fw-bold \"  v-if=\"nameError\">{{ nameError }}</span>\r\n\r\n              </div>\r\n              <div class=\"inp\">\r\n               <label for=\"\">{{ $t('email') }}</label>\r\n               <input type=\"email\" v-model=\"mainObj.email\" placeholder=\"example@mail.com..\">\r\n           <span class=\"errorMessage text-danger fw-bold \"  v-if=\"emailError\">{{ emailError }}</span>\r\n\r\n              </div>\r\n              <div class=\"inp\">\r\n               <label for=\"\">{{ $t('phone number') }}</label>\r\n               <input type=\"text\" v-model=\"mainObj.phone\" placeholder=\"05xxxxxxxx.....\">\r\n           <span class=\"errorMessage text-danger fw-bold \"  v-if=\"phoneError\">{{ phoneError }}</span>\r\n         \r\n              </div>\r\n           \r\n              <div class=\"inp\">\r\n               <label for=\"\">{{ $t('What is your car’s model year?') }}</label>\r\n               <input type=\"number\" v-model=\"mainObj.model_year\" min=\"1900\" max=\"2100\" step=\"1\" >\r\n           <span class=\"errorMessage text-danger fw-bold \"  v-if=\"modelYearError\">{{ modelYearError }}</span>\r\n       \r\n              </div>\r\n              <div class=\"inp\">\r\n               <label for=\"\">{{ $t('What is your car’s Brand?') }}</label>\r\n               <select  name=\"\" id=\"\" v-model=\"mainObj.brand_id\">\r\n                 <option :value=\"null\" disabled>{{ $t('Select Brand...') }}</option>\r\n                 <option v-for=\"brand in mainBrands\" :value=\"brand.id\">{{ brand.name }}</option>\r\n               </select>\r\n             <span class=\"errorMessage text-danger fw-bold\"  v-if=\"brandError\">{{ brandError }}</span>\r\n \r\n              </div>\r\n              <div class=\"inp\">\r\n               <label for=\"\">{{ $t('Which car model are you booking for?') }}</label>\r\n               <select name=\"\" id=\"\" v-model=\"mainObj.model_id\">\r\n               <option :value=\"null\" disabled>{{ $t('Select Model...') }}</option>\r\n                 <option v-if=\"mainObj.brand_id\" v-for=\"model,index in mainBrands[mainObj.brand_id - 1].models\" :value=\"model.id\">{{ model.name }}</option>\r\n               </select>\r\n          <span class=\"errorMessage text-danger fw-bold\"  v-if=\"modelError\">{{ modelError }}</span>\r\n \r\n              </div>\r\n              <div class=\"inp\">\r\n               <label for=\"\">{{ $t('Choose a city and branch for your service') }}</label>\r\n               <div class=\"d-flex gap-3\">\r\n               <div class=\"d-flex flex-column w-50\">\r\n                <select  name=\"\" id=\"\" class=\"w-100\" v-model=\"mainObj.city_id\">\r\n                 <option :value=\"null\" disabled>{{ $t('Select city...') }}</option>\r\n                 <option v-for=\"city in maincities\" :value=\"city.id\">{{ city.name }}</option>\r\n               </select>\r\n            <span class=\"errorMessage text-danger fw-bold \"  v-if=\"cityError\">{{ cityError }}</span>   \r\n               </div>\r\n               <div class=\"d-flex flex-column w-50\">\r\n                 <select name=\"\" id=\"\" class=\"w-100\" v-model=\"mainObj.branch_id\">\r\n                  <option :value=\"null\" disabled>{{ $t('Select branch...') }}</option>\r\n                 <option v-if=\"mainObj.city_id\" v-for=\"branch in  maincities[mainObj.city_id - 1].branches\" :value=\"branch.id\">{{ branch.name }}</option>\r\n               </select>\r\n              <span class=\"errorMessage text-danger fw-bold \"  v-if=\"branchError\">{{ branchError }}</span>\r\n   \r\n               </div>\r\n                \r\n             \r\n               </div>\r\n             \r\n              </div>\r\n              <div class=\"inp\">\r\n               <label for=\"\">{{ $t('Please add any extra information about your appointment request') }}</label>\r\n              <textarea style=\"resize:none;\" v-model=\"mainObj.description\" rows=\"\" cols=\"\" :placeholder=\"$t('write your message here')\"></textarea>\r\n              <span class=\"errorMessage text-danger fw-bold \"  v-if=\"descError\">{{descError }}</span>\r\n\r\n              </div>\r\n             \r\n            </form>\r\n           </div> \r\n           <div class=\"col-12 col-xl-4 col-lg-4 col-md-4 d-flex align-items-center gap-5 flex-column\">\r\n            <div id=\"inline_cal\">\r\n             </div>\r\n            \r\n             <div class=\"time\">\r\n               <h3>{{ $t('time') }}</h3>\r\n               <div class=\"d-flex align-items-center justify-content-center\">\r\n                 <div v-if=\"spinner\" class=\"spinner-border\" role=\"status\">\r\n              </div>\r\n               </div>\r\n              \r\n                <div class=\"timesec\">\r\n                    <span v-for=\"item,index in times\" @click=\"activeTime = index + 1,  item.available? mainObj.time = item.value : null\" :class=\"{'disabled': item.available==false,'choose':activeTime == index+1}\">{{ item.time }}</span>\r\n                </div>\r\n                \r\n             </div>\r\n                         <span class=\"errorMessage text-danger fw-bold \"  v-if=\"timeError\">{{ timeError }}</span>\r\n             <div class=\"check d-flex align-items-center gap-3\">\r\n            <input id=\"checkTerms\" type=\"checkbox\" value=\"1\" v-model=\"mainObj.terms_and_privacy\">\r\n             <label for=\"checkTerms\"> {{ $t('I have read and unconditionally agree to the') }} <span type=\"button\" data-bs-toggle=\"modal\" data-bs-target=\"#termsModal\">{{ $t('Term And Conditions') }}</span>  {{ $t('and') }} <span type=\"button\" data-bs-toggle=\"modal\" data-bs-target=\"#privacyModal\">{{ $t('Privacy Policy') }}</span> </label>                \r\n             </div>\r\n            <span class=\"errorMessage text-danger fw-bold \"  v-if=\" terms_and_privacyError\">{{ terms_and_privacyError }}</span>\r\n             <button :disabled=\"spinnerBtn\" @click=\"sendAppointment()\" class=\"w-100 d-flex align-items-center justify-content-center gap-4\">\r\n            <span>{{ $t('submit') }}</span> \r\n               <div v-if=\"spinnerBtn\"  class=\"spinner-border text-light\" role=\"status\">\r\n               </div>\r\n             </button>\r\n\r\n           </div> \r\n          </div>\r\n         </div>\r\n              <div v-if=\"pending\"  class=\"mainLoader\">\r\n              <span class=\"loader\"></span>\r\n              </div>\r\n          <TermsModal/>\r\n         <privacyModal/>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n\r\nimport axios from 'axios';\r\n    const {locale} = useI18n();\r\nlet mainDate = ref(null);\r\nlet activeTime = ref(1);\r\nlet spinner = ref(true);\r\nlet pending = ref(true);\r\nlet currentLang = ref(locale);\r\nconst daysOfWeek = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];\r\nlet finalDaysOf = ref([]);\r\nconst router = useRouter()\r\nconst url = getUrl();\r\nlet mainBrands = ref([]);\r\nlet maincities = ref([]);\r\nlet daysOf = ref([]);\r\nlet times = ref([]);\r\nconst appointmentFunc = async () => {\r\n  pending.value = true;\r\nlet appointmentData = await axios.get(`${url}/make-appointment-form-data`, {\r\n  headers: {\r\n     'Content-Language':`${currentLang.value}`\r\n  }\r\n});\r\n\r\nif (appointmentData.status == 200) {\r\n  pending.value = false;\r\n} \r\n     console.log(appointmentData.data);\r\n mainBrands.value = appointmentData.data.brands;\r\n maincities.value = appointmentData.data.cities;\r\n  daysOf.value = appointmentData.data.days_of;\r\n\r\n   const functionDaysOf = () => {\r\n  for (let i = 0; i < daysOf.value.length; i++){\r\n    finalDaysOf.value.push(daysOfWeek.indexOf(daysOf.value[i]));\r\n  }\r\n}\r\nfunctionDaysOf();\r\n\r\n\r\nfunction disableDaysOfWeek(date) {\r\n  return !finalDaysOf.value.includes(date.getDay()); \r\n}\r\n if (process.client) {\r\n    rome(inline_cal,{\r\n      time: false,\r\n      min:appointmentData.data.start_date,\r\n      max:appointmentData.data.end_date,\r\n      dateValidator: disableDaysOfWeek\r\n        \r\n    });\r\n    let lastSelectedDate = null;\r\n\r\n    let days = document.querySelectorAll('.rd-day-body');\r\n\r\n    days.forEach((ele) => {\r\n      ele.addEventListener('click', () => {\r\n          setTimeout(async () => {\r\n            mainDate.value = rome(inline_cal).getDateString();\r\n            console.log(mainDate.value);\r\n            if (lastSelectedDate != mainDate.value)\r\n            {\r\n              lastSelectedDate = mainDate.value;\r\n              let  allDates  = await axios.get(`${url}/time-slots?date=${mainDate.value}`, {\r\n                headers: {\r\n                  'Content-Language':`${currentLang.value}`\r\n                }\r\n              });\r\n              times.value = allDates.data;\r\n              console.log(times.value);\r\n              mainObj.value.date = mainDate.value;\r\n              spinner.value = false;\r\n            }\r\n          }, 100);\r\n        })\r\n    })\r\n\r\n        document.querySelector('.rd-day-body.rd-day-selected').click();\r\n    \r\n  } \r\n  \r\n\r\n}\r\nappointmentFunc();\r\n\r\n\r\n\r\n\r\n\r\nlet branchNameAndId = ref([]);\r\nlet cityName = ref(null);\r\nlet mainObj = ref({\r\n  name: null,\r\n  phone: null,\r\n  branch_id: null,\r\n  brand_id: null,\r\n  city_id: null,\r\n  model_id: null,\r\n  model_year:2023,\r\n  date: null,\r\n  description: null,\r\n  email: null,\r\n  time: null,\r\n  terms_and_privacy:null,\r\n  \r\n});\r\n\r\nlet phoneError = ref(null);\r\nlet nameError = ref(null);\r\nlet branchError = ref(null);\r\nlet brandError = ref(null);\r\nlet cityError = ref(null);\r\nlet modelError = ref(null);\r\nlet dateError = ref(null);\r\nlet descError = ref(null);\r\nlet emailError = ref(null);\r\nlet timeError = ref(null);\r\nlet terms_and_privacyError = ref(null);\r\nlet modelYearError = ref(null);\r\nlet spinnerBtn = ref(false);\r\n\r\nconst sendAppointment = async () => {\r\n  // start loading disable btn\r\n    spinnerBtn.value = true;\r\n   let result = fetch(`${url}/make-appointment`, {\r\n      method: 'post',\r\n       headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify( mainObj.value),\r\n   }).then((response) => response.json())\r\n     .then((json) => {\r\n      // remove loading enable btn\r\n        spinnerBtn.value = false;\r\n       console.log(json);\r\n     \r\n       if (json.message) {\r\n               \r\n         phoneError.value = json.errors.phone == undefined ? null : json.errors.phone[0]; \r\n         nameError.value = json.errors.name == undefined ? null : json.errors.name[0]; \r\n         emailError.value = json.errors.email == undefined ? null : json.errors.email[0]; \r\n         branchError.value = json.errors.branch_id == undefined ? null : json.errors.branch_id[0]; \r\n         brandError.value = json.errors.brand_id == undefined ? null : json.errors.brand_id[0]; \r\n         cityError.value = json.errors.city_id == undefined ? null : json.errors.city_id[0]; \r\n         modelError.value = json.errors.model_id == undefined ? null : json.errors.model_id[0]; \r\n         dateError.value = json.errors.date == undefined ? null : json.errors.date[0]; \r\n         descError.value = json.errors.description == undefined ? null : json.errors.description[0]; \r\n         timeError.value = json.errors.time == undefined ? null : json.errors.time[0]; \r\n         terms_and_privacyError.value = json.errors.terms_and_privacy == undefined ? null : json.errors.terms_and_privacy[0]; \r\n         modelYearError.value = json.errors.model_year == undefined ? null : json.errors.model_year[0]; \r\n\r\n      } else {\r\n            const queryParams = {\r\n        id: json.id,\r\n        date: json.date,\r\n        time: json.time,\r\n        branch: json.branch,\r\n        city: json.city,\r\n         }\r\n    \r\n      const url = currentLang.value + '/booked'\r\n      router.push({ path:`/${url}` , query: queryParams })\r\n         \r\n         spinnerBtn.value = false;\r\n        //console.log(mainObj.value);\r\n      \r\n      }\r\n    \r\n     \r\n\r\n      \r\n    });\r\n}\r\n\r\n\r\n   useHead({\r\n  title: currentLang.value == 'ar' ? 'احجز موعد صيانتك / الكثيري للسيارات' : 'alkathiri motors / BOOK YOUR MAINTENANCE APPOINTMENT'\r\n});\r\n\r\nonMounted(async () => {\r\n \r\n})\r\n\r\n\r\n\r\n\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\r\n\r\n\r\n</style>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwII,UAAM,EAAC,OAAM,IAAI;AACN,QAAI,IAAI;AACvB,QAAI,aAAa,IAAI,CAAC;AACtB,QAAI,UAAU,IAAI,IAAI;AACtB,QAAI,UAAU,IAAI,IAAI;AACtB,QAAI,cAAc,IAAI,MAAM;AAC5B,UAAM,aAAa,CAAC,UAAU,UAAU,WAAW,aAAa,YAAY,UAAU,UAAU;AAChG,QAAI,cAAc,IAAI,CAAA,CAAE;AACT,cAAW;AAC1B,UAAM,MAAM,OAAM;AAClB,QAAI,aAAa,IAAI,CAAA,CAAE;AACvB,QAAI,aAAa,IAAI,CAAA,CAAE;AACvB,QAAI,SAAS,IAAI,CAAA,CAAE;AACnB,QAAI,QAAQ,IAAI,CAAA,CAAE;AAClB,UAAM,kBAAkB,YAAY;AAClC,cAAQ,QAAQ;AAClB,UAAI,kBAAkB,MAAM,MAAM,IAAI,GAAG,kCAAkC;AAAA,QACzE,SAAS;AAAA,UACN,oBAAmB,GAAG,YAAY;AAAA,QACpC;AAAA,MACH,CAAC;AAED,UAAI,gBAAgB,UAAU,KAAK;AACjC,gBAAQ,QAAQ;AAAA,MAClB;AACK,cAAQ,IAAI,gBAAgB,IAAI;AACpC,iBAAW,QAAQ,gBAAgB,KAAK;AACxC,iBAAW,QAAQ,gBAAgB,KAAK;AACvC,aAAO,QAAQ,gBAAgB,KAAK;AAEnC,YAAM,iBAAiB,MAAM;AAC9B,iBAAS,IAAI,GAAG,IAAI,OAAO,MAAM,QAAQ,KAAI;AAC3C,sBAAY,MAAM,KAAK,WAAW,QAAQ,OAAO,MAAM,CAAC,CAAC,CAAC;AAAA,QAC3D;AAAA,MACH;AACA;IA6CA;AACA;AAMsB,QAAI,EAAE;AACb,QAAI,IAAI;AACvB,QAAI,UAAU,IAAI;AAAA,MAChB,MAAM;AAAA,MACN,OAAO;AAAA,MACP,WAAW;AAAA,MACX,UAAU;AAAA,MACV,SAAS;AAAA,MACT,UAAU;AAAA,MACV,YAAW;AAAA,MACX,MAAM;AAAA,MACN,aAAa;AAAA,MACb,OAAO;AAAA,MACP,MAAM;AAAA,MACN,mBAAkB;AAAA,IAEpB,CAAC;AAED,QAAI,aAAa,IAAI,IAAI;AACzB,QAAI,YAAY,IAAI,IAAI;AACxB,QAAI,cAAc,IAAI,IAAI;AAC1B,QAAI,aAAa,IAAI,IAAI;AACzB,QAAI,YAAY,IAAI,IAAI;AACxB,QAAI,aAAa,IAAI,IAAI;AACT,QAAI,IAAI;AACxB,QAAI,YAAY,IAAI,IAAI;AACxB,QAAI,aAAa,IAAI,IAAI;AACzB,QAAI,YAAY,IAAI,IAAI;AACxB,QAAI,yBAAyB,IAAI,IAAI;AACrC,QAAI,iBAAiB,IAAI,IAAI;AAC7B,QAAI,aAAa,IAAI,KAAK;AAyDvB,YAAQ;AAAA,MACT,OAAO,YAAY,SAAS,OAAO,wCAAwC;AAAA,IAC7E,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}