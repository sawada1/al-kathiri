{"version":3,"file":"brands-7efa48a0.js","sources":["../../../../pages/brands.vue"],"sourcesContent":["<template>\r\n    <div>\r\n  \r\n    \r\n         <div class=\"brands-container\" style=\"\">\r\n   \r\n             <swiper\r\n        :slidesPerView=\"3\"\r\n        :spaceBetween=\"10\"\r\n       :loop=\"true\"\r\n        :breakpoints=\"{\r\n          '500': {\r\n            slidesPerView:3,\r\n            spaceBetween: 10,\r\n          },\r\n          '768': {\r\n            slidesPerView: 5,\r\n            spaceBetween: 20,\r\n          },\r\n          '1024': {\r\n            slidesPerView: 8,\r\n            spaceBetween: 20,\r\n          },\r\n        }\"\r\n    :modules=\"modules\"\r\n    class=\"mySwiper\"\r\n  >\r\n    <swiper-slide class=\"\" v-for=\"box,index in brandArray\">\r\n    <div class=\"box\" :class=\"{'active':changeActive==box.id}\" @click=\"changeActive=box.id , changeActiveFunc(box.id),carLatestFunc()\">\r\n    <img :src=\"box.image\" alt=\"\">\r\n      <span>{{ box.name }}</span>\r\n    </div>      \r\n    </swiper-slide>\r\n    \r\n  \r\n  </swiper>\r\n\r\n\r\n     \r\n    </div>\r\n      <div v-if=\"pending\"  class=\"mainLoader\">\r\n     <span class=\"loader\"></span>\r\n    </div>\r\n\r\n      <div class=\"container cars-related-with-brands\" style=\"min-height: 100vh;\">\r\n   <div class=\"row justify-content-center\">\r\n     <div v-if=\"spinner\" class=\"d-flex align-items-center justify-content-center\">\r\n         <div class=\"spinner-border text-center\" style=\"width: 5rem; height: 5rem;\" role=\"status\">\r\n</div>\r\n                  \r\n </div>\r\n   <div v-if=\"latestArray\" class=\"col-3 mainlatestbox\" v-for=\"car in  latestArray\" style=\"cursor: pointer; \">\r\n       <div class=\"image\"  >\r\n              <img @click=\"goToCarPage(car.id , car.name)\" :src=\"car.main_image\" loading=\"lazy\" :alt=\"car.name\" />\r\n            </div>\r\n          <h3>{{ car.name }}</h3>\r\n          <div class=\"text1\">\r\n            <div class=\"price\">\r\n              <span>{{ $t('price') }}</span>\r\n              <h4>{{car.selling_price}}</h4>\r\n            </div>\r\n            <div class=\"after\">\r\n              <span>{{ $t('after vat') }}</span>\r\n              <h4>{{ car.selling_price_after_vat == null ? 0 : car.selling_price_after_vat }}</h4>\r\n            </div>\r\n          </div>\r\n          <span class=\"detail\">\r\n                {{ $t('details') }}\r\n                    <i class=\"fa-solid fa-chevron-right\"></i> \r\n          </span>\r\n          <div class=\"overlay\" @click=\"goToCarPage(car.id , car.name)\"></div>\r\n          <i @click=\"addToFav(car)\" class=\"fa-regular fa-heart fav\"  :class=\"{'fa-solid':car.is_in_favorite}\"  ></i>\r\n     \r\n   \r\n   </div>\r\n \r\n      \r\n   \r\n   </div>\r\n\r\n      <div class=\"d-flex align-items-center justify-content-center  mt-5\">\r\n       <button @click=\"goToBrandPageById()\" class=\"d-flex align-items-center gap-2 px-5\">\r\n       Explore more\r\n      <i class=\"fa-solid fa-chevron-right\"></i>\r\n       </button>\r\n      </div>\r\n   </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { createToast } from 'mosha-vue-toastify';\r\nimport 'mosha-vue-toastify/dist/style.css'\r\nimport { Autoplay, Pagination, Navigation } from \"swiper\";\r\n import { Swiper, SwiperSlide } from 'swiper/vue';\r\nimport 'swiper/css';\r\nimport axios from 'axios';\r\nexport default {\r\n      components: {\r\n    Swiper,\r\n    SwiperSlide,\r\n  },\r\n  async setup() {\r\nconst localePath = useLocalePath();\r\nconst {locale } = useI18n();\r\nlet lang = ref(locale);\r\nlet url = getUrl();\r\nlet router = useRouter();\r\nlet brandArray = ref([]);\r\nlet latestArray = ref([]);\r\nlet changeActive = ref(1);\r\nlet spinner = ref(false); \r\nlet checkMain = ref([changeActive.value]);\r\n\r\nconst changeActiveFunc = (id) => {\r\n  checkMain.value[0] = id;\r\n}\r\nlet pending = ref(true);  \r\nconst brandsFunc = async () => {\r\n  pending.value = true;\r\n   let  brands  = await axios.get(`${url}/brands`,{\r\n      headers: {\r\n    'Content-Language':`${lang.value}`\r\n  }\r\n   });\r\n   \r\n  if (brands.status == 200) {\r\n    pending.value = false;\r\n}\r\n  brandArray.value = brands.data.data;\r\n\r\n\r\n     \r\n}\r\nbrandsFunc();\r\n\r\n \r\n\r\n    const carLatestFunc = async () => {\r\n      spinner.value = true;\r\n      latestArray.value = [];\r\n         let latest = await axios.get(`${url}/cars`, {\r\n        params: {\r\n          brands: checkMain.value,\r\n        },\r\n        headers: {\r\n          'Content-Language': `${lang.value}`\r\n        }\r\n         });\r\n\r\n         \r\n  if (latest.status == 200) {\r\n    spinner.value = false;\r\n     if (process.client) {\r\n   let favGet = JSON.parse(sessionStorage.getItem('thefav'))? JSON.parse(sessionStorage.getItem('thefav')) : [];\r\n      console.log(favGet);\r\n       if (favGet.length >= 1) {\r\n        //  latest.data.data = favGet;\r\n         for (let i = 0; i < latest.data.data.length; i++){\r\n           if (latest.data.data[i].id == favGet[i].id) {\r\n              latest.data.data[i].is_in_favorite = favGet[i].is_in_favorite;\r\n             }\r\n             \r\n          \r\n         }\r\n        }\r\n      }\r\n  \r\n      latestArray.value = latest.data.data;\r\n    \r\n      }\r\n      \r\n    };\r\n\r\n    \r\n    const goToBrandPageById = () => {\r\n   const queryParams = {\r\n        id: changeActive.value,\r\n      }\r\n         const url = lang.value + '/brandcar'\r\n      router.push({ path: `/${url}` , query: queryParams})\r\n    }\r\n\r\n     const goToCarPage = (id , name) => {\r\n      const queryParams = {\r\n        id: id,\r\n        name: name,\r\n      }\r\n         const url = lang.value + '/car'\r\n\r\n      router.push({ path: `/${url}` , query: queryParams })\r\n    }\r\n\r\n       let addedList = ref('added to wishlist');\r\n    let success = ref('success');\r\n    let removedList = ref('removed from wishlist')\r\n    if (lang.value == 'ar') {\r\n      addedList.value = 'تم الاضافة الي قائمة المفضلات'\r\n      success.value = 'نجاح';\r\n      removedList.value = 'تم الحذف من قائمة المفضلات'\r\n    } \r\n    let fav = ref([]);\r\n    let favState = ref([]);\r\n  const addToFav = (box) => {\r\n      if (process.client) {\r\n   let favGet = JSON.parse(sessionStorage.getItem('thefav'))? JSON.parse(sessionStorage.getItem('thefav')) : [];\r\n      // let favChoose = favGet.find((boxi) => boxi.name == box.name);\r\n        let favChoose =  favGet.filter((ele) => {\r\n          return ele.id == box.id;\r\n      });\r\n      console.log(favChoose);\r\n      // console.log(favGet);\r\n        \r\n          box.is_in_favorite = !box.is_in_favorite;\r\n      if (favChoose.length <= 1) {\r\n        //fav.value.push(box)\r\n        favGet.push(box);\r\n        if (box.is_in_favorite == true) {\r\n          sessionStorage.setItem('thefav', JSON.stringify(favGet));\r\n              createToast({\r\n            title: addedList.value,\r\n            description: success.value,\r\n            },\r\n            {\r\n            timeout: 5000,\r\n            toastBackgroundColor: 'green',\r\n            showIcon: 'true',\r\n            type: 'success',\r\n            transition: 'bounce',\r\n            })\r\n        } else {\r\n           let final =   favGet.filter((ele) => {\r\n                    return ele.id != box.id;\r\n           });\r\n            createToast({\r\n            title: removedList.value,\r\n            description: success.value,\r\n            },\r\n            {\r\n              timeout: 5000,\r\n            toastBackgroundColor: 'green',\r\n            showIcon: 'true',\r\n            type: 'success',\r\n            transition: 'bounce',\r\n            })    \r\n                  fav.value = [];\r\n                   \r\n                 sessionStorage.setItem('thefav', JSON.stringify(final));\r\n                    if (final.length < 1) {\r\n                      // window.location.reload();\r\n                      sessionStorage.removeItem(\"thefav\");\r\n                      // fav.value = [];\r\n\r\n                    }\r\n      }       \r\n               \r\n        } \r\n       \r\n           \r\n        \r\n      }\r\n  \r\n\r\n      \r\n    }\r\n\r\n\r\nuseHead({\r\n  title: lang.value == 'ar' ? 'السيارات/الكثيري للسيارات' : 'alkathiri motors / cars'\r\n});\r\n\r\nonMounted(() => {\r\ncarLatestFunc();\r\n});\r\n\r\n  return {\r\n    modules: [Autoplay, Pagination, Navigation],\r\n    goToBrandPageById,\r\n    pending,\r\n    brandArray,\r\n    latestArray,\r\n    checkMain,\r\n    changeActive,\r\n    carLatestFunc,\r\n    changeActiveFunc,\r\n    spinner,\r\n    goToCarPage,\r\n    addToFav\r\n     \r\n    }\r\n  \r\n  }\r\n  }\r\n\r\n\r\n\r\n\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\r\n\r\n</style>"],"names":["brands","url","_push","_parent","_ssrRenderComponent","_","_scopeId","_ssrInterpolate","_createVNode","_toDisplayString","_openBlock","_createBlock","_Fragment","_renderList","_ssrRenderList","_ssrRenderClass"],"mappings":"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"}