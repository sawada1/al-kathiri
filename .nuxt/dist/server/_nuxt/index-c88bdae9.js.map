{"version":3,"file":"index-c88bdae9.js","sources":["../../../../pages/brandcar/index.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"brandCars\">\r\n   <div class=\"container p-2\">\r\n     <div class=\"row p-2 gap-4\">\r\n        <div class=\"col-12 col-xl-3 col-lg-3 col-md-12 d-flex flex-column align-items-center\">\r\n        <div class=\"filter d-flex align-items-center justify-content-between w-100\">\r\n            <h5>{{ $t('filter') }}</h5>\r\n            <span @click=\"reset()\">{{ $t('reset') }}</span>\r\n        </div>\r\n    \r\n          <div class=\"rangeSlider\">\r\n\r\n     <div class=\"mainprocess\">\r\n            <span></span>\r\n        </div>\r\n        <div class=\"rangeGroups\">\r\n          <input type=\"range\" class=\"range-min\" min=\"222000\" max=\"870000\" value=\"222000\" step=\"100\">\r\n        <input type=\"range\" class=\"range-max\" min=\"222000\" max=\"870000\" value=\"870000\" step=\"100\">\r\n        </div>\r\n        <div class=\"inputs w-100 d-flex align-items-center justify-content-between\">\r\n         <span>{{ minNum }} sar</span>\r\n         <span>{{ maxNum }} sar</span>\r\n        </div>\r\n    </div>\r\n\r\n   \r\n          \r\n\r\n    <div  class=\"accordion\" id=\"accordionExample\">\r\n      <div class=\"accordion-item mainItem\">\r\n    <h2 class=\"accordion-header\">\r\n         <button class=\"accordion-button collapsed  mainbtnacc\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapsecars\" aria-expanded=\"true\" aria-controls=\"collapseOne\">\r\n     <span class=\"theHead\"> {{ $t('cars') }} </span>\r\n      </button>\r\n    </h2>\r\n    <div id=\"collapsecars\" class=\"accordion-collapse collapse show\" data-bs-parent=\"#accordionExample\">\r\n      <div class=\"accordion-body\">\r\n       <div class=\"checksCars\">\r\n     <div class=\"inp\" v-for=\"box,index in filterData.brands\">\r\n      <input :id=\"`label${index}`\" type=\"checkbox\" :checked=\"mainId == box.id\" v-model=\"checkMain\" :value=\"box.id\" >\r\n      <label :for=\"`label${index}`\" class=\"d-flex align-items-center gap-2\">\r\n      <img :src=\"box.image\" alt=\"\">\r\n      <span>{{ box.name }}</span>\r\n      </label>\r\n      \r\n      \r\n     </div>\r\n    </div>\r\n      </div>\r\n    </div>\r\n    \r\n  </div>\r\n  <div class=\"accordion-item mainItem\">\r\n    <h2 class=\"accordion-header\">\r\n      <button class=\"accordion-button  d-flex align-items-center gap-5  mainbtnacc\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapseOne\" aria-expanded=\"true\" aria-controls=\"collapseOne\">\r\n     <span class=\"theHead\"> {{ $t('mark & model') }} </span>\r\n      </button>\r\n    </h2>\r\n    <div v-if=\"checkMain.length >= 1\"  id=\"collapseOne\" class=\"accordion-collapse collapse\" :class=\"{'show':index==0}\" data-bs-parent=\"#accordionExample\">\r\n      <div  class=\"accordion-body\">\r\n     <div class=\"accordion\" id=\"accordionbranch1\">\r\n  <div v-for=\"item,index in checkMain\" class=\"accordion-item mainbranch w-100\">\r\n  <div v-for=\"boxi in filterData.brands[item - 1].parent_models\">\r\n   <div class=\"accordion-header w-100\">\r\n      <button class=\"accordion-button  d-flex align-items-center gap-3\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapseOnebranch1\" aria-expanded=\"true\" aria-controls=\"collapseOne\">\r\n        <input type=\"checkbox\" v-model=\"models\" :value=\"boxi.id\">\r\n        <span style=\"white-space: nowrap;\">{{ boxi.name }}</span>\r\n      </button>\r\n    </div>\r\n   \r\n    <div id=\"collapseOnebranch1\" class=\"accordion-collapse collapse show\" data-bs-parent=\"#accordionbranch1\">\r\n      <div class=\"accordion-body \">\r\n         <div class=\"checks d-flex flex-column gap-3\">\r\n            <div v-for=\"box in boxi.sub_models\" class=\"inp d-flex align-items-center gap-3 p-2\">\r\n            <input type=\"checkbox\" v-model=\"subModels\" :value=\"box.id\">\r\n            <span>{{ box.name }}</span>\r\n            </div>\r\n             \r\n        \r\n         </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n   \r\n  </div>\r\n \r\n</div>\r\n      </div>\r\n    </div>\r\n    <div v-else class=\"fw-bold text-center my-2\">{{ $t('you have to choose a brand') }}</div>\r\n  </div>\r\n \r\n  <div class=\"accordion-item mainItem\">\r\n    <h2 class=\"accordion-header\">\r\n        <button class=\"accordion-button collapsed mainbtnacc\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapseThree\" aria-expanded=\"true\" aria-controls=\"collapseOne\">\r\n     <span class=\"theHead\"> {{ $t('car type') }} </span>\r\n      </button>\r\n    </h2>\r\n    <div id=\"collapseThree\" class=\"accordion-collapse collapse\" data-bs-parent=\"#accordionExample\">\r\n      <div class=\"accordion-body d-flex flex-column gap-2\">\r\n         <div class=\"inp d-flex align-items-center gap-2\">\r\n          <input id=\"hatchback\" type=\"radio\" v-model=\"checkType\" value=\"hatchback\">\r\n          <label for=\"hatchback\">hatchback</label>\r\n         </div>\r\n         <div class=\"inp d-flex align-items-center gap-2\">\r\n          <input id=\"sedan\" type=\"radio\" v-model=\"checkType\" value=\"sedan\">\r\n          <label for=\"sedan\">sedan</label>\r\n         </div>\r\n         <div class=\"inp d-flex align-items-center gap-2\">\r\n          <input id=\"4_by_4\" type=\"radio\" v-model=\"checkType\" value=\"4_by_4\">\r\n          <label for=\"4_by_4\">4_by_4</label>\r\n         </div>\r\n         <div class=\"inp d-flex align-items-center gap-2\">\r\n          <input id=\"family\" type=\"radio\" v-model=\"checkType\" value=\"family\">\r\n          <label for=\"family\">family</label>\r\n         </div>\r\n         <div class=\"inp d-flex align-items-center gap-2\">\r\n          <input id=\"commercial\" type=\"radio\" v-model=\"checkType\" value=\"commercial\">\r\n          <label for=\"commercial\">commercial</label>\r\n         </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<button @click=\"showCars()\" class=\"my-3\">{{ $t('apply') }}</button>\r\n        </div>\r\n           <div class=\"col-12 col-xl-8 col-lg-8 col-md-12 \">\r\n           <div v-if=\"checkMain.length >= 1\">\r\n            <h2 v-if=\"checkMain.length >= 1\" v-for=\"item,index in checkMain\" class=\"fw-bolder py-1\">\r\n             <span  v-for=\"mainTitle in filterData.brands[item - 1].name\">{{ mainTitle }}</span>,\r\n            </h2>\r\n           </div>\r\n           \r\n            <h2 v-else class=\"fw-bolder\">\r\n              {{ $t('all cars') }}\r\n            </h2>\r\n                  <div class=\"row justify-content-center \">\r\n              <div v-for=\"car in brandCars\" style=\"cursor: pointer;\"  class=\"mainlatestbox col-xl-3 col-lg-3 col-md-5 \">\r\n                <div @click=\"goToCarPage(car.id , car.name)\"  class=\"image\">\r\n                    <img :src=\"car.main_image\" alt=\"\">\r\n                </div>\r\n               \r\n                <h3 style=\"font-size: 16px;\">{{ car.name }}</h3>\r\n                <div class=\"text1\">\r\n                    <div class=\"price\">\r\n                        <span>{{ $t('price') }}</span>\r\n                        <h4 style=\"font-size: 14px;\">{{ car.selling_price }} SAR</h4>\r\n                    </div>\r\n                    <div class=\"after\">\r\n                        <span>{{ $t('after vat') }}</span>\r\n                        <h4 style=\"font-size: 14px;\">{{car.selling_price_after_vat}} SAR</h4>\r\n                    </div>\r\n                </div>\r\n                 <p class=\"detail\">\r\n                 {{$t('details')}}\r\n                  <i class=\"fa-solid fa-chevron-right\"></i>\r\n                 </p>\r\n                 <div @click=\"goToCarPage(car.id , car.name)\" class=\"overlay\"></div>\r\n               \r\n              <i @click=\"addToFav(car)\" class=\"fa-regular fa-heart fav\" :class=\"{'fa-solid':car.is_in_favorite}\"></i>\r\n             </div>\r\n            \r\n\r\n      \r\n               </div>  \r\n              <div v-if=\"spinner\" class=\"d-flex align-items-center justify-content-center\">\r\n         <div class=\"spinner-border text-center\" style=\"width: 5rem; height: 5rem;\" role=\"status\">\r\n  <span class=\"visually-hidden\">Loading...</span>\r\n</div>\r\n                   </div>\r\n          \r\n\r\n            </div>\r\n       \r\n     </div>\r\n  </div>\r\n</div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport axios from 'axios'\r\nimport { createToast } from 'mosha-vue-toastify';\r\nimport 'mosha-vue-toastify/dist/style.css'\r\nconst route = useRoute();\r\nconst router = useRouter();\r\nconst mainId = route.query.id ? route.query.id : null;\r\nconst mainType = route.query.type ? route.query.type : null;\r\nconst mainModel = route.query.model ? route.query.model : null;\r\nconst mainName = route.query.name ? route.query.name : null;\r\nlet checkType = ref(mainType ? mainType : null);\r\nconst localePath = useLocalePath();\r\nlet url = getUrl();\r\nconst { locale} = useI18n();\r\n let currentLang = ref(locale);\r\nlet spinner = ref(true);\r\n\r\nlet  filterCar  = await axios.get(`${url}/cars-filter-data`,{\r\n      headers: {\r\n    'Content-Language':`${currentLang.value}`\r\n  }\r\n});\r\nlet brandCars = ref([]);\r\nlet models = ref(mainModel ? [mainModel] : []);\r\nlet subModels = ref([]); \r\nlet filterData = ref(filterCar.data);\r\nconsole.log(filterData.data);\r\nconst checkMain = ref(mainId ? [mainId] : []);\r\n\r\nlet minNum = ref(filterData.value.minPrice);\r\nlet maxNum = ref(filterData.value.maxPrice);\r\nconst rangeSlider = () => {\r\n  if (process.client) {\r\n      let rangeInputs = document.querySelectorAll('.rangeGroups input');\r\nlet proceess = document.querySelector('.mainprocess span');\r\nlet inputs = document.querySelectorAll('.inputs-groups .inp input');\r\n\r\n\r\n\r\nrangeInputs.forEach((e) => {\r\n    e.addEventListener('input', (ele) => {\r\n        let minPrice = parseInt(rangeInputs[0].value),\r\n            maxPrice = parseInt(rangeInputs[1].value);\r\n        console.log(minPrice, maxPrice);\r\n        console.log((minPrice / rangeInputs[0].max) * 100 + \"%\");\r\n        console.log((maxPrice / rangeInputs[0].max) * 100 + \"%\");\r\n        if ((maxPrice - minPrice) < 100000) {\r\n            if (ele.target.className === 'range-min') {\r\n                rangeInputs[0].value = maxPrice - 100000;\r\n            } else {\r\n                rangeInputs[1].value = minPrice + 100000;\r\n            }\r\n        } else {\r\n            // proceess.style.left = (minPrice / rangeInputs[0].max) * 100 + \"%\";\r\n            // proceess.style.right = 100 - (maxPrice / rangeInputs[1]) * 100 + \"%\";\r\n            minNum.value = minPrice;\r\n            maxNum.value = maxPrice;\r\n        }\r\n    })\r\n});\r\n\r\n\r\n\r\n    }\r\n}\r\n\r\n const goToCarPage = (id , name) => {\r\n      const queryParams = {\r\n        id: id,\r\n        name: name,\r\n      }\r\n         let url = currentLang.value + '/car'\r\n\r\n      router.push({ path:`/${url}` , query: queryParams })\r\n    }\r\n\r\n   let fav = ref([]); \r\n\r\n       let addedList = ref('added to wishlist');\r\n    let success = ref('success');\r\n    let removedList = ref('removed from wishlist')\r\n    if (currentLang.value == 'ar') {\r\n      addedList.value = 'تم الاضافة الي قائمة المفضلات'\r\n      success.value = 'نجاح';\r\n      removedList.value = 'تم الحذف من قائمة المفضلات'\r\n    } else if (currentLang.value == 'en') {\r\n       addedList.value = 'added to wishlist'\r\n      success.value = 'success';\r\n      removedList.value = 'removed from wishlist';\r\n    }\r\n    const addToFav = (box) => {\r\n      if (process.client) {\r\n   let favGet = JSON.parse(sessionStorage.getItem('thefav'))? JSON.parse(sessionStorage.getItem('thefav')) : [];\r\n      // let favChoose = favGet.find((boxi) => boxi.name == box.name);\r\n        let favChoose =  favGet.filter((ele) => {\r\n          return ele.id == box.id;\r\n      });\r\n      console.log(favChoose);\r\n      // console.log(favGet);\r\n        \r\n          box.is_in_favorite = !box.is_in_favorite;\r\n      if (favChoose.length <= 1) {\r\n        //fav.value.push(box)\r\n        favGet.push(box);\r\n        if (box.is_in_favorite == true) {\r\n                       createToast({\r\n            title: addedList.value,\r\n            description: success.value,\r\n            },\r\n            {\r\n            timeout: 5000,\r\n            toastBackgroundColor: 'green',\r\n            showIcon: 'true',\r\n            type: 'success',\r\n            transition: 'bounce',\r\n            })\r\n         sessionStorage.setItem('thefav', JSON.stringify(favGet));\r\n        } else {\r\n           let final =   favGet.filter((ele) => {\r\n                    return ele.id != box.id;\r\n           });\r\n\r\n            createToast({\r\n            title: removedList.value,\r\n            description: success.value,\r\n            },\r\n            {\r\n              timeout: 5000,\r\n            toastBackgroundColor: 'green',\r\n            showIcon: 'true',\r\n            type: 'success',\r\n            transition: 'bounce',\r\n            })   \r\n                  fav.value = [];\r\n                   \r\n                 sessionStorage.setItem('thefav', JSON.stringify(final));\r\n                    if (final.length < 1) {\r\n                      // window.location.reload();\r\n                      sessionStorage.removeItem(\"thefav\");\r\n                      // fav.value = [];\r\n\r\n                    }\r\n      }       \r\n               \r\n        } \r\n       \r\n           \r\n        \r\n      }\r\n  \r\n\r\n      \r\n    }\r\n\r\n\r\n\r\nconst showCars = async () => {\r\n  spinner.value = true;\r\n  let result = await axios.get(`${url}/cars`, {\r\n    params: {\r\n      brands:checkMain.value,\r\n      min_price:minNum.value,\r\n      max_price: maxNum.value,\r\n      models: models.value,\r\n      sub_models: subModels.value,\r\n      type: checkType.value ? checkType.value : ''\r\n    },\r\n      headers: {\r\n    'Content-Language':`${currentLang.value}`\r\n   }\r\n  });\r\n    if (process.client) {\r\n   let favGet = JSON.parse(sessionStorage.getItem('thefav'))? JSON.parse(sessionStorage.getItem('thefav')) : [];\r\n      console.log(favGet);\r\n       if (favGet.length >= 1) {\r\n        //  latest.data.data = favGet;\r\n         for (let i = 0; i < favGet.length; i++){ \r\n          \r\n          result.data.data[favGet[i].id - 1].is_in_favorite = favGet[i].is_in_favorite;\r\n          \r\n         }\r\n         //result.data.data[1].is_in_favorite = true;\r\n        }\r\n      }\r\n  brandCars.value = result.data.data;\r\n  if (result.status == 200) {\r\n    spinner.value = false;\r\n  }\r\n  console.log(result.data.data); \r\n}\r\n\r\nconst reset = () => {\r\n  checkMain.value = [];\r\n  minNum.value = minNum.value;\r\n  maxNum.value = maxNum.value;\r\n  models.value = [];\r\n  subModels.value = [];\r\n  checkType.value = '';\r\n}\r\nonMounted(() => {\r\n  rangeSlider();\r\n  showCars();\r\n\r\n});\r\n  useHead({\r\n  title: currentLang.value == 'ar' ? `${mainName || 'السيارات'}/الكثيري للسيارات` : `alkathiri motors / ${mainName || 'cars'}`\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\r\n\r\n</style>"],"names":["_withAsyncContext"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2LA,UAAM,QAAQ,SAAQ;AACP,cAAY;AAC3B,UAAM,SAAS,MAAM,MAAM,KAAK,MAAM,MAAM,KAAK;AACjD,UAAM,WAAW,MAAM,MAAM,OAAO,MAAM,MAAM,OAAO;AACvD,UAAM,YAAY,MAAM,MAAM,QAAQ,MAAM,MAAM,QAAQ;AAC1D,UAAM,WAAW,MAAM,MAAM,OAAO,MAAM,MAAM,OAAO;AACvD,QAAI,YAAY,IAAI,WAAW,WAAW,IAAI;AAC3B,kBAAgB;AACnC,QAAI,MAAM,OAAM;AAChB,UAAM,EAAE,OAAM,IAAI;AACjB,QAAI,cAAc,IAAI,MAAM;AAC7B,QAAI,UAAU,IAAI,IAAI;AAEtB,QAAK,aAAmB,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAA,MAAM,IAAI,GAAG,wBAAuB;AAAA,MACtD,SAAS;AAAA,QACX,oBAAmB,GAAG,YAAY;AAAA,MACnC;AAAA,IACH,CAAC,CAAA;AACD,QAAI,YAAY,IAAI,CAAA,CAAE;AACtB,QAAI,SAAS,IAAI,YAAY,CAAC,SAAS,IAAI,CAAE,CAAA;AAC7C,QAAI,YAAY,IAAI,CAAA,CAAE;AACtB,QAAI,aAAa,IAAI,UAAU,IAAI;AACnC,YAAQ,IAAI,WAAW,IAAI;AAC3B,UAAM,YAAY,IAAI,SAAS,CAAC,MAAM,IAAI,CAAE,CAAA;AAE5C,QAAI,SAAS,IAAI,WAAW,MAAM,QAAQ;AAC1C,QAAI,SAAS,IAAI,WAAW,MAAM,QAAQ;AA8C7B,QAAI,CAAA,CAAE;AAEZ,QAAI,YAAY,IAAI,mBAAmB;AAC1C,QAAI,UAAU,IAAI,SAAS;AAC3B,QAAI,cAAc,IAAI,uBAAuB;AAC7C,QAAI,YAAY,SAAS,MAAM;AAC7B,gBAAU,QAAQ;AAClB,cAAQ,QAAQ;AAChB,kBAAY,QAAQ;AAAA,IAC1B,WAAe,YAAY,SAAS,MAAM;AACnC,gBAAU,QAAQ;AACnB,cAAQ,QAAQ;AAChB,kBAAY,QAAQ;AAAA,IACrB;AAmHH,YAAQ;AAAA,MACR,OAAO,YAAY,SAAS,OAAO,GAAG,YAAY,gCAAgC,sBAAsB,YAAY;AAAA,IACtH,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}