{"version":3,"file":"career-357e9614.js","sources":["../../../../pages/career.vue"],"sourcesContent":["<template>\r\n    <div>\r\n       <div class=\"container career\">\r\n          <h3 :data-find=\"$t('JOIN OUR TEAM')\">{{ $t('find your career') }}</h3>\r\n          <div class=\"row gap-2 justify-content-center\">\r\n           <div class=\"col-12 col-xl-4 col-lg-4 col-md-4    d-flex flex-column gap-3\">\r\n             <div class=\"inpsearch d-flex align-items-center justify-content-between\">\r\n              <input type=\"search\" placeholder=\"Job title or key...\">\r\n              <i class=\"fa-solid fa-magnifying-glass\"></i>\r\n             </div>\r\n              <p class=\"numjobs\"><span>{{ allJobs.length }}</span> {{ $t('open opportunities') }} </p>\r\n              <div class=\"jobs d-flex flex-column gap-3\">\r\n                  <div v-for=\"job in allJobs\" @click=\"mainid = job.id\" class=\"job d-flex align-items-center justify-content-between\" :class=\"{'active': job.id == id}\">\r\n                  <div class=\"det\">\r\n                   <h6>{{ job.title }}</h6>\r\n                 \r\n                   <span>{{ job.address }} |  {{ job.created_at }}</span>\r\n                  </div>\r\n                    <i class=\"fa-solid fa-chevron-right\"></i>\r\n                 </div>\r\n                 \r\n              </div>\r\n           </div>\r\n           <div class=\"col-12 col-xl-7 col-lg-7 col-md-7 my-5\">\r\n           <div v-for=\"job in allJobs\">\r\n                <form v-if=\"id == job.id\" action=\"\" @submit.prevent>\r\n                <h5><i class=\"fa-solid fa-chevron-left\"></i> {{ job.title }}</h5>\r\n                <div class=\"inp\">\r\n                 <label for=\"\">{{ $t('full name') }}</label>\r\n                 <input  v-model=\"namee\" type=\"text\" :placeholder=\"$t('write your name..')\">\r\n               <span class=\"errorMessage text-danger fw-bold fs-5 my-2\" v-if=\"nameError\">{{ nameError }}</span>\r\n                </div>\r\n                <div class=\"inp\">\r\n                 <label for=\"\">{{ $t('email') }}</label>\r\n                 <input  v-model=\"email\" type=\"email\" placeholder=\"example@mail.com...\">\r\n               <span class=\"errorMessage text-danger fw-bold fs-5 my-2\" v-if=\"emailError\">{{ emailError }}</span>\r\n                </div>\r\n                <div class=\"inp\">\r\n                 <label for=\"\">{{ $t('phone number') }}</label>\r\n                 <input  v-model=\"phone\" type=\"text\" placeholder=\"05xxxxxxxx...\">\r\n               <span class=\"errorMessage text-danger fw-bold fs-5 my-2\" v-if=\"phoneError\">{{ phoneError }}</span>\r\n                </div>\r\n                <div class=\"inp\">\r\n                 <label for=\"\">{{ $t('resume') }}</label>\r\n                 <input @change=\"onFileChange\" type=\"file\" name=\"\">\r\n            <span class=\"errorMessage text-danger fw-bold fs-5 my-2\" v-if=\"cvError\">{{ cvError }}</span>\r\n                </div>\r\n                <div class=\"inp\">\r\n                 <label for=\"\">{{ $t('Do you have any comments ?') }}</label>\r\n                 <textarea style=\"resize: none;\" :placeholder=\"$t('write your message here')\" name=\"\" cols=\"10\" rows=\"5\"></textarea>\r\n                </div>\r\n                <div>\r\n                 <nuxt-link >\r\n                 <button   class=\"d-flex align-items-center gap-3\" :disabled=\"spinner\"  @click=\"sendjob()\">\r\n                 <span>{{ $t('send application') }}</span> \r\n                 <div v-if=\"spinner\" class=\"spinner-border text-light\" role=\"status\">\r\n                    </div>\r\n                 </button>                \r\n                 </nuxt-link>\r\n              \r\n                </div>\r\n             </form>\r\n           </div>\r\n          \r\n           </div>\r\n           \r\n          </div>\r\n       </div>\r\n           <div v-if=\"pending\"  class=\"mainLoader\">\r\n     <span class=\"loader\"></span>\r\n    </div>\r\n     \r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport axios from 'axios';\r\nconst {locale } = useI18n();\r\nconst router = useRouter();\r\nconst route = useRoute();\r\nlet url = getUrl();\r\nlet lang = ref(locale);\r\nlet pending = ref(false);\r\nconst id = route.query.id ? route.query.id : null;\r\n\r\nlet allJobs = ref([]);\r\nconst jobFunc = async () => {\r\n  pending.value = true;\r\nconst  jobs  = await axios.get(`${url}/careers`,{\r\n      headers: {\r\n    'Content-Language':`${lang.value}`\r\n  }\r\n});\r\n  if (jobs.status == 200) {\r\n    pending.value = false;\r\n}\r\n allJobs.value = jobs.data.data;\r\nconsole.log(allJobs.value);  \r\n}\r\njobFunc();\r\n\r\nconst cv = ref(null);  \r\nconst phone = ref(null);  \r\nconst email = ref(null);  \r\nconst namee = ref('');  \r\n\r\n\r\nlet emailError = ref(null);\r\nlet phoneError = ref(null);\r\nlet nameError = ref(null);\r\nlet cvError = ref(null);\r\nlet spinner = ref(false);\r\n const onFileChange = (e) =>{\r\n      var files = e.target.files || e.dataTransfer.files;\r\n      if (!files.length)\r\n        return;\r\n      cv.value = (files[0]);\r\n    }\r\nconst sendjob = async () => {\r\n    let formData = new FormData();\r\n    formData.append(\"name\", namee.value); \r\n    formData.append(\"email\", email.value); \r\n    formData.append(\"phone\",phone.value); \r\n   formData.append(\"cv\", cv.value);\r\n   console.log(formData);\r\n   spinner.value = true;\r\n  const result = await fetch(`${url}/careers/${id}/apply`, {\r\n    method: 'POST',\r\n    headers: {\r\n\r\n      //   'Accept': 'application/json',\r\n      //  'Content-Type': 'multipart/form-data',\r\n    },\r\n    body: formData,\r\n\r\n  }).then((response) => response.json())\r\n    .then((json) => {\r\n      console.log(json);\r\n      spinner.value = false;\r\n      if (json.message) {\r\n        emailError.value = json.errors.email == undefined ? null : json.errors.email[0];\r\n        nameError.value = json.errors.name == undefined ? null : json.errors.name[0];\r\n        phoneError.value = json.errors.phone == undefined ? null : json.errors.phone[0];\r\n        cvError.value = json.errors.cv == undefined ? null : json.errors.cv[0];\r\n      } else {\r\n\r\n        emailError.value = null;\r\n        nameError.value = null;\r\n        phoneError.value = null;\r\n        cvError.value = null;\r\n        router.push(`/${lang.value}/submited`);\r\n      }\r\n\r\n\r\n\r\n    });\r\n}\r\n\r\nuseHead({\r\n  title: lang.value == 'ar' ? ' وظائف/الكثيري للسيارات' : 'alkathiri motors / careers'\r\n});\r\n\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\r\n\r\n\r\n</style>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA,UAAM,EAAC,OAAM,IAAK;AAClB,UAAM,SAAS,UAAS;AACxB,UAAM,QAAQ,SAAQ;AACtB,QAAI,MAAM,OAAM;AAChB,QAAI,OAAO,IAAI,MAAM;AACrB,QAAI,UAAU,IAAI,KAAK;AACvB,UAAM,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,KAAK;AAE7C,QAAI,UAAU,IAAI,CAAA,CAAE;AACpB,UAAM,UAAU,YAAY;AAC1B,cAAQ,QAAQ;AAClB,YAAO,OAAQ,MAAM,MAAM,IAAI,GAAG,eAAc;AAAA,QAC1C,SAAS;AAAA,UACX,oBAAmB,GAAG,KAAK;AAAA,QAC5B;AAAA,MACH,CAAC;AACC,UAAI,KAAK,UAAU,KAAK;AACtB,gBAAQ,QAAQ;AAAA,MACpB;AACC,cAAQ,QAAQ,KAAK,KAAK;AAC3B,cAAQ,IAAI,QAAQ,KAAK;AAAA,IACzB;AACA;AAEA,UAAM,KAAK,IAAI,IAAI;AACnB,UAAM,QAAQ,IAAI,IAAI;AACtB,UAAM,QAAQ,IAAI,IAAI;AACtB,UAAM,QAAQ,IAAI,EAAE;AAGpB,QAAI,aAAa,IAAI,IAAI;AACzB,QAAI,aAAa,IAAI,IAAI;AACzB,QAAI,YAAY,IAAI,IAAI;AACxB,QAAI,UAAU,IAAI,IAAI;AACtB,QAAI,UAAU,IAAI,KAAK;AAOvB,UAAM,UAAU,YAAY;AACxB,UAAI,WAAW,IAAI;AACnB,eAAS,OAAO,QAAQ,MAAM,KAAK;AACnC,eAAS,OAAO,SAAS,MAAM,KAAK;AACpC,eAAS,OAAO,SAAQ,MAAM,KAAK;AACpC,eAAS,OAAO,MAAM,GAAG,KAAK;AAC9B,cAAQ,IAAI,QAAQ;AACpB,cAAQ,QAAQ;AACF,YAAM,MAAM,GAAG,eAAe,YAAY;AAAA,QACvD,QAAQ;AAAA,QACR,SAAS;AAAA;AAAA;AAAA,QAIR;AAAA,QACD,MAAM;AAAA,MAEP,CAAA,EAAE,KAAK,CAAC,aAAa,SAAS,KAAI,CAAE,EAClC,KAAK,CAAC,SAAS;AACd,gBAAQ,IAAI,IAAI;AAChB,gBAAQ,QAAQ;AAChB,YAAI,KAAK,SAAS;AAChB,qBAAW,QAAQ,KAAK,OAAO,SAAS,SAAY,OAAO,KAAK,OAAO,MAAM,CAAC;AAC9E,oBAAU,QAAQ,KAAK,OAAO,QAAQ,SAAY,OAAO,KAAK,OAAO,KAAK,CAAC;AAC3E,qBAAW,QAAQ,KAAK,OAAO,SAAS,SAAY,OAAO,KAAK,OAAO,MAAM,CAAC;AAC9E,kBAAQ,QAAQ,KAAK,OAAO,MAAM,SAAY,OAAO,KAAK,OAAO,GAAG,CAAC;AAAA,QAC7E,OAAa;AAEL,qBAAW,QAAQ;AACnB,oBAAU,QAAQ;AAClB,qBAAW,QAAQ;AACnB,kBAAQ,QAAQ;AAChB,iBAAO,KAAK,IAAI,KAAK,gBAAgB;AAAA,QACtC;AAAA,MAIP,CAAK;AAAA,IACL;AAEA,YAAQ;AAAA,MACN,OAAO,KAAK,SAAS,OAAO,4BAA4B;AAAA,IAC1D,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}